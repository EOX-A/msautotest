# Test Runtime Substitutions
#
# RUN_PARMS: scaletoken_data_200k.png [SHP2IMG] -l layer1 -m [MAPFILE] -o [RESULT] -e 478315 4762880 481645 4765610
# RUN_PARMS: scaletoken_data_29m.png [SHP2IMG] -l layer1  -m [MAPFILE] -o [RESULT] -e 425000 4685000 489000 5189000
# RUN_PARMS: scaletoken_data_40m.png [SHP2IMG] -l layer1 -m [MAPFILE] -o [RESULT]
# RUN_PARMS: scaletoken_filter_192k.png [SHP2IMG] -l layer2 -m [MAPFILE] -o [RESULT] -e 478315 4762880 481645 4765610
# RUN_PARMS: scaletoken_filter_424k.png [SHP2IMG] -l layer2  -m [MAPFILE] -o [RESULT] -e 476315 4762880 483645 4765610
# RUN_PARMS: scaletoken_filter_655k.png [SHP2IMG] -l layer2 -m [MAPFILE] -o [RESULT] -e 474315 4762880 485645 4765610 
# RUN_PARMS: scaletoken_filteritem_192k.png [SHP2IMG] -l layer3 -m [MAPFILE] -o [RESULT] -e 478315 4762880 481645 4765610
# RUN_PARMS: scaletoken_filteritem_424k.png [SHP2IMG] -l layer3  -m [MAPFILE] -o [RESULT] -e 476315 4762880 483645 4765610
#
MAP
  NAME 'scaletoken'
  EXTENT 125000 4785000 789000 5489000
  UNITS METERS
  SIZE 50 50
  SHAPEPATH "."

  IMAGETYPE PNG
  DEBUG 10
  CONFIG "MS_ERRORFILE" "stderr"

  LAYER
    NAME 'layer1'
    STATUS ON
    DEBUG 10
    SCALETOKEN
      NAME "%shpfile%"
      DEFAULT "data/shppoly/poly.shp"
      VALUES
        "1000000/35000000" "../query/data/indx_q100kpy4.shp"
        "35000000/50000000" "../query/data/bdry_counpy2"
      END
    END
    DATA '%shpfile%'
    TYPE POLYGON
    CLASS
      STYLE OUTLINECOLOR 51 51 51 END
    END
  END
  LAYER
    NAME 'layer2'
    STATUS ON
    DEBUG 10
    DATA "data/shppoly/poly.shp"
    SCALETOKEN
      NAME "%filter%"
      DEFAULT "([EAS_ID]=158)"
      VALUES
        "200000/500000" "([EAS_ID]=166)"
        "500000/1000000" ""
      END
    END
    FILTER "%filter%"
    TYPE POLYGON
    CLASS
      STYLE COLOR 51 51 51 END
    END
  END
  LAYER
    NAME 'layer3'
    STATUS ON
    DEBUG 10
    DATA "data/shppoly/poly.shp"
    SCALETOKEN
      NAME "%filteritem%"
      DEFAULT "EAS_ID"
      VALUES
        "200000/500000" "PRFEDEA"
      END
    END
    SCALETOKEN
      NAME "%filter%"
      DEFAULT "173"
      VALUES
        "200000/500000" "35043369"
      END
    END
    FILTERITEM "%filteritem%"
    FILTER "%filter%"
    TYPE POLYGON
    CLASS
      STYLE COLOR 51 51 51 END
    END
  END
  
END
